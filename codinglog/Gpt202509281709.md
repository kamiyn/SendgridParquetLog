# プロンプト
- SendgridParquetViewer/Services/CompactionService.cs のコンパクション処理で 1GB メモリ制限を超えて Docker インスタンスが再起動するため、対応すること
- AGENTS.md 記載の開発ルール（非 sudo、IReadOnlyList<T> の利用推奨、dotnet format 実行など）

# 処理内容
- CompactionService を解析し、高メモリ使用箇所（S3 からの全量読み込みと大量イベント保持）を特定
- S3 読み込みをストリーミング化し、一時ファイル経由で ParquetReader を開くようリファクタリング
- イベントをチャンク化してチャネルへ送信するよう変更し、chunk index やオプション `MaxEventsPerChunk` を追加
- Chunk index に基づき一時 MemoryPack ファイル名を一意化するよう消费者処理を更新
- CompactionBatchContext のバイト数トラッキングを long 対応に変更
- dotnet build でコンパイル確認（サンドボックス拒否のため権限昇格して再実行）
